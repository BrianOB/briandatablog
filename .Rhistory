y=rank)) +
facet_wrap(~ valid_year) +
geom_rect(alpha=.7) +
scale_x_continuous(
limits = c(-250, 2000),
breaks = c(0, 500, 1000, 1500)) +
geom_text(col = "gray13",
hjust = "right",
aes(label = dog_name),
x = -50) +
scale_y_reverse() +
labs(x='Number of dogs',
y='') +
my_theme +
facet_null() +
geom_text(x = 1500 , y = -10,
family = "Times New Roman",
aes(label = as.character(valid_year)),
size = 30, col = "grey18") +
aes(group=dog_name, fill=dog_name) +
transition_time(valid_year)
# animate it
animate(my_plot,nframes=300, fps=10, start_pause=10, end_pause=30, device='png')
blogdown:::serve_site()
dog_all %>%
filter(valid_year >= 2007, valid_year < 2020) %>%
group_by(valid_year, dog_name) %>%
summarise(dogs=n()) %>%
mutate(rank = 1:n()) %>%
ungroup() %>%
group_by(valid_year, top10 = ifelse(rank < 11, 'Y','N')) %>%
summarise(dogs = sum(dogs)) %>%
mutate(pct = round(dogs / sum(dogs), digits=3))
dog_all %>%
filter(valid_year >= 2007, valid_year < 2020) %>%
group_by(valid_year, dog_name) %>%
summarise(dogs=n()) %>%
mutate(rank = 1:n())
dog_all %>%
filter(valid_year >= 2007, valid_year < 2020) %>%
group_by(valid_year, dog_name) %>%
summarise(dogs=n()) %>%
arrange(valid_year, -dogs) %>%
mutate(rank = 1:n()) %>%
ungroup() %>%
group_by(valid_year, top10 = ifelse(rank < 11, 'Y','N')) %>%
summarise(dogs = sum(dogs)) %>%
mutate(pct = round(dogs / sum(dogs), digits=3))
dog_all %>%
filter(valid_year >= 2007, valid_year < 2020) %>%
group_by(valid_year) %>%
distinct(dog_name) %>%
count()
14740 / (80045+7651)
80045 + 7651
dog_all %>% filter(valid_year == 2019) %>% count()
87696/14740
dog_all %>% filter(valid_year == 2019) %>% group_by(dog_name) %>% count() %>% filter(n==1)
dog_all %>% filter(valid_year == 2019) %>% group_by(dog_name) %>% summarise(median=median(n()))
dog_all %>% filter(valid_year == 2019) %>% summarise(median=median(n()))
dog_all %>% filter(valid_year == 2019) %>% summarise(median=median(count(dog_name))
)
dog_all %>% filter(valid_year == 2019) %>% group_by(dog_name) %>% summarise(dogs = n()) %>% ungroup() %>% summarise(median(dogs))
path_data <- 'D:/Documents/data/Pennsylvania/campfin/'
library(tidyverse)
data_2006 <- read_csv(paste0(path_data,'2006/contrib_2006.txt'))
data_2006 <- read_csv(paste0(path_data,'2006/contrib_2006.txt'),col_types=cols(.default=col_character()))
problems(data_2006)
parse_problems <- problems(data_2006)
View(parse_problems)
data_2006 <- read_csv(paste0(path_data,'2006/contrib_2006.txt'),col_types=cols(.default=col_character()),
col_names=F)
parse_problems <- problems(data_2006)
View(data_2006)
data_2006 %>%
filter(x5=='JIM & SUZANNE FERGUSON')
data_2006 %>%
filter(X5=='JIM & SUZANNE FERGUSON')
data_2006 %>%
filter(X5=='MELANIE D NARO')
colnames <- ('FILERID','EYEAR','CYCLE','SECTION','CONTRIBUTOR','ADDRESS1','ADDRESS2',
colnames <- c('FILERID','EYEAR','CYCLE','SECTION','CONTRIBUTOR','ADDRESS1','ADDRESS2',
'CITY','STATE','ZIPCODE','OCCUPATION','ENAME','EADDRESS1','EADDRESS2','ECITY',
'ESTATE','EZIPCODE','CONTDATE1','CONTAMT1','CONTDATE2','CONTAMT2','CONTDATE3',
'CONTAMT3','CONTDESC')
data_2006 <- read_csv(paste0(path_data,'2006/contrib_2006.txt'),col_types=cols(.default=col_character()),
col_names=colnames)
parse_problems <- problems(data_2006)
data_2006 %>%
filter(CONTRIBUTOR == 'JIM & SUZANNE FERGUSON')
data_2006 %>%
filter(CONTRIBUTOR %in% c('JIM & SUZANNE FERGUSON','20TH WARD SOCIAL CLUB')
data_2006 %>%
filter(CONTRIBUTOR %in% c('JIM & SUZANNE FERGUSON','20TH WARD SOCIAL CLUB'))
data_2006 %>%
filter(CONTRIBUTOR %in% c('JIM & SUZANNE FERGUSON','20TH WARD SOCIAL CLUB','MELANIE D NARO'))
data_2006 %>%
filter(CONTRIBUTOR %in% c('LAURA & SONIA'))
data_2006 %>%
filter(CONTRIBUTOR %in% c('ALPHONSO HATCHER'))
data_2006 <- read_csv(paste0(path_data,'2006/contrib_2006.txt'),col_types=cols(.default=col_character()),
col_names=colnames)
summary(data_2006)
data_2006 %>%
group_by(EYEAR) %>%
count()
data_2006 <- read_csv(paste0(path_data,'2006/contrib_2006.txt'),col_types=cols(.default=col_character()),
col_names=colnames,
skip_empty_rows = F)
data_2006_1 <- read_delim(paste0(path-data,'2006/contrib_2006.txt',col_types=(.default=col_character()),
delim = '#'))
data_2006_1 <- read_delim(file=paste0(path-data,'2006/contrib_2006.txt'),col_types=(.default=col_character()),
delim = '#')
data_2006_1 <- read_delim(file=paste0(path_data,'2006/contrib_2006.txt'),col_types=(.default=col_character()),
delim = '#')
data_2006_1 <- read_delim(file=paste0(path_data,'2006/contrib_2006.txt'),col_types=cols(.default=col_character()),
delim = '#')
View(data_2006_1)
data_2006_1 <- read_delim(file=paste0(path_data,'2006/contrib_2006.txt'),col_types=cols(.default=col_character()),
delim = '~')
data_2006_1 <- read_csv(paste0(path_data,'2006/contrib_2006_1.txt'),col_types=cols(.default=col_character()),
col_names=colnames,
skip_empty_rows = F)
library(tidyverse)
path_data <- 'D:/Documents/data/Pennsylvania/campfin/'
data_2006_1 <- read_csv(paste0(path_data,'2006/contrib_2006_1.txt'),col_types=cols(.default=col_character()),
col_names=colnames,
skip_empty_rows = F)
colnames <- c('FILERID','EYEAR','CYCLE','SECTION','CONTRIBUTOR','ADDRESS1','ADDRESS2',
'CITY','STATE','ZIPCODE','OCCUPATION','ENAME','EADDRESS1','EADDRESS2','ECITY',
'ESTATE','EZIPCODE','CONTDATE1','CONTAMT1','CONTDATE2','CONTAMT2','CONTDATE3',
'CONTAMT3','CONTDESC')
data_2006_1 <- read_csv(paste0(path_data,'2006/contrib_2006_1.txt'),col_types=cols(.default=col_character()),
col_names=colnames,
skip_empty_rows = F)
data_2006_2 <- read_csv(paste0(path_data,'2006/contrib_2006_2.txt'),col_types=cols(.default=col_character()),
col_names=colnames,
skip_empty_rows = F)
data_2006_1_1 <- read_csv(paste0(path_data,'2006/contrib_2006_1_1.txt'),col_types=cols(.default=col_character()),
col_names=colnames,
skip_empty_rows = F)
data_2006_1_2 <- read_csv(paste0(path_data,'2006/contrib_2006_1_2.txt'),col_types=cols(.default=col_character()),
col_names=colnames,
skip_empty_rows = F)
View(data_2006_1_1)
data_2006_1_1_1 <- read_csv(paste0(path_data,'2006/contrib_2006_1_1_1.txt'),col_types=cols(.default=col_character()),
col_names=colnames,
skip_empty_rows = F)
data_2006_1_1_2 <- read_csv(paste0(path_data,'2006/contrib_2006_1_1_2.txt'),col_types=cols(.default=col_character()),
col_names=colnames,
skip_empty_rows = F)
read_partial <- function(x,s, n,colnames) {
test <- read_csv(x,
col_types=cols(.default=col_character()),
col_names = colnames,
skip = s,
n_max = n)
return(length(test) == n)
}
file = paste0(path_data,'2006/contrib_2006_1.txt')
read_partial(file,0,50)
file = paste0(path_data,'2006/contrib_2006_1.txt')
read_partial(file,0,50,colnames)
file = paste0(path_data,'2006/contrib_2006_1.txt')
read_partial(file,50,50,colnames)
file = paste0(path_data,'2006/contrib_2006_1.txt')
read_partial(file,100,50,colnames)
read_partial <- function(x,s, n,colnames) {
test <- read_csv(x,
col_types=cols(.default=col_character()),
col_names = colnames,
skip = s,
n_max = n)
return(length(test))
}
file = paste0(path_data,'2006/contrib_2006_1.txt')
read_partial(file,100,50,colnames)
file = paste0(path_data,'2006/contrib_2006_1.txt')
read_partial(file,0,50,colnames)
read_partial <- function(x,s, n,colnames) {
test <- read_csv(x,
col_types=cols(.default=col_character()),
col_names = colnames,
skip = s,
n_max = n)
return(nrow(test))
}
file = paste0(path_data,'2006/contrib_2006_1.txt')
read_partial(file,0,50,colnames)
read_partial <- function(x,s, n,colnames) {
test <- read_csv(x,
col_types=cols(.default=col_character()),
col_names = colnames,
skip = s,
n_max = n)
return(nrow(test)==n)
}
file = paste0(path_data,'2006/contrib_2006_1.txt')
read_partial(file,0,50,colnames)
file = paste0(path_data,'2006/contrib_2006_1.txt')
read_partial(file,50,50,colnames)
text_lines = 805759
file = paste0(path_data,'2006/contrib_2006_1.txt')
test_increments = seq(0,test_lines-50,50)
test_increments = seq(0,text_lines-50,50)
test <- map(test_increments, function(x) read_partial(file,x,50,colnames))
text_lines = 805759
file = paste0(path_data,'2006/contrib_2006_1.txt')
test_increments = seq(0,text_lines-50000,50000)
test <- map(test_increments, function(x) read_partial(file,x,50,colnames))
test_increments[unlist(test)]
test_increments[!unlist(test)]
test_increments = seq(300000,350000,50000)
test_increments = seq(300000,350000,50000)
test <- map(test_increments, function(x) read_partial(file,x,50,colnames))
test_increments = seq(300000,350000,5000)
test <- map(test_increments, function(x) read_partial(file,x,50,colnames))
text_lines = 805759
file = paste0(path_data,'2006/contrib_2006_1.txt')
test_number = 50000
test_increments = seq(0,text_lines-test_number,test_number)
test <- map(test_increments, function(x) read_partial(file,x,test_number,colnames))
test_increments[!unlist(test)]
test_number = 5000
test_increments = seq(300000,350000,test_number)
test <- map(test_increments, function(x) read_partial(file,x,test_number,colnames))
read_partial(file,300000,5000,colnames)
read_partial(file,300000,2500,colnames)
read_partial(file,300000,1250,colnames)
read_partial(file,300000,50,colnames)
read_partial(file,300000,1,colnames)
read_csv(file,
col_types=cols(.default=col_character()),
col_names = colnames,
skip =300000,
n_max = 1)
read_csv(file,
col_types=cols(.default=col_character()),
col_names = colnames,
skip =300000,
n_max = 10)
text_lines = 805759
file = paste0(path_data,'2006/contrib_2006.txt')
test_number = 50000
test_increments = seq(0,text_lines-test_number,test_number)
test <- map(test_increments, function(x) read_partial(file,x,test_number,colnames))
test_increments[!unlist(test)]
test_number = 5000
test_increments = seq(600000,650000, test_number)
test <- map(test_increments, function(x) read_partial(file,x,test_number,colnames))
read_partial(file,300000,1,colnames)
test_increments[unlist(test)]
test_number = 1000
test_increments = seq(600000,605000, test_number)
test <- map(test_increments, function(x) read_partial(file,x,test_number,colnames))
test_increments[unlist(test)]
test_number = 1000
test_increments = seq(600000,605000, test_number)
test <- map(test_increments, function(x) read_partial(file,x,test_number,colnames))
test_increments[!unlist(test)]
test_number = 5000
test_increments = seq(600000,650000, test_number)
test <- map(test_increments, function(x) read_partial(file,x,test_number,colnames))
test_increments[!unlist(test)]
test_number = 1000
test_increments = seq(615000,620000, test_number)
test <- map(test_increments, function(x) read_partial(file,x,test_number,colnames))
test_increments[!unlist(test)]
test_number = 500
test_increments = seq(618000,619000, test_number)
test <- map(test_increments, function(x) read_partial(file,x,test_number,colnames))
test_increments[!unlist(test)]
test_number = 100
test_increments = seq(618500,619000, test_number)
test <- map(test_increments, function(x) read_partial(file,x,test_number,colnames))
test_increments[!unlist(test)]
test_number = 10
test_increments = seq(618800,618900, test_number)
test <- map(test_increments, function(x) read_partial(file,x,test_number,colnames))
test_increments[!unlist(test)]
test_number = 1
test_increments = seq(618830,618940, test_number)
test <- map(test_increments, function(x) read_partial(file,x,test_number,colnames))
test_number = 1
test_increments = seq(618830,618840, test_number)
test <- map(test_increments, function(x) read_partial(file,x,test_number,colnames))
test_increments[!unlist(test)]
read_csv(file,
col_names = colnames,
skip=618830,
n_max=10)
read_csv(file,
col_names = colnames,
skip=618820,
n_max=20)
read_csv(file,
col_names = colnames,
skip=618820,
n_max=30)
read_csv(file,
col_names = colnames,
skip=618820,
n_max=30)
data_2006 <- read_csv(paste0(path_data,'2006/contrib_2006.txt'),col_types=cols(.default=col_character()),
col_names=colnames,
skip_empty_rows = F)
data_2006 %>%
slice(10)
data_2006 %>%
slice(1:10)
data_2006 %>%
slice(805744:)
data_2006 %>%
slice(805744:805754)
read_partial <- function(x,s, n,colnames) {
test <- read_csv(x,
col_types=cols(.default=col_character()),
col_names = colnames,
skip = s,
n_max = n)
print(test)
return(nrow(test)==n)
}
test_number = 1
test_increments = seq(618830,618840, test_number)
test <- map(test_increments, function(x) read_partial(file,x,test_number,colnames))
test_increments[!unlist(test)]
text_lines = 805759
file = paste0(path_data,'2006/contrib_2006.txt')
test_number = 50000
test_increments = seq(0,text_lines-test_number,test_number)
test <- map(test_increments, function(x) read_partial(file,x,test_number,colnames))
test_increments[!unlist(test)]
data_2006 <- read_csv(paste0(path_data,'2006/contrib_2006.txt'),col_types=cols(.default=col_character()),
col_names=colnames,
skip_empty_rows = F)
data_2006 <- read_csv(paste0(path_data,'2006/contrib_2006.txt'),col_types=cols(.default=col_character()),
col_names=colnames,
skip_empty_rows = F)
path_data <- 'D:/Documents/data/Pennsylvania/campfin/'
colnames <- c('FILERID','EYEAR','CYCLE','SECTION','CONTRIBUTOR','ADDRESS1','ADDRESS2',
'CITY','STATE','ZIPCODE','OCCUPATION','ENAME','EADDRESS1','EADDRESS2','ECITY',
'ESTATE','EZIPCODE','CONTDATE1','CONTAMT1','CONTDATE2','CONTAMT2','CONTDATE3',
'CONTAMT3','CONTDESC')
data_2006 <- read_csv(paste0(path_data,'contrib_2006.txt'),col_names=colnames,
col_types = cols(.default=col_character()))
data_2006 <- read_csv(paste0(path_data,'2006/contrib_2006.txt'),col_names=colnames,
col_types = cols(.default=col_character()))
data_2006_1 <- read_csv(paste0(path_data,'2006/contrib_2006.csv'),
col_names=colnames,
col_types=cols(.default=col_character())
)
data_2006_1 <- read_csv(paste0(path_data,'2006/contrib_2006.csv'),
col_names=colnames,
col_types=cols(.default=col_character())
)
data_2006_1 <- read_csv(paste0(path_data,'2006/contrib_2006.csv'),
col_names=colnames,
col_types=cols(.default=col_character())
)
write_csv(data_2006,paste0(path_data,'2006/trunc.csv'))
data_2006_1 <- read_file(paste0(path-data,'2006/contrib_2006.txt', "RAW"))
data_2006_1 <- read_file(paste0(path_data,'2006/contrib_2006.txt', "RAW"))
data_2006_1 <- read_file(paste0(path_data,'2006/contrib_2006.txt'), "RAW")
path_data <- 'D:/Documents/data/Pennsylvania/campfin/'
colnames <- c('FILERID','EYEAR','CYCLE','SECTION','CONTRIBUTOR','ADDRESS1','ADDRESS2',
'CITY','STATE','ZIPCODE','OCCUPATION','ENAME','EADDRESS1','EADDRESS2','ECITY',
'ESTATE','EZIPCODE','CONTDATE1','CONTAMT1','CONTDATE2','CONTAMT2','CONTDATE3',
'CONTAMT3','CONTDESC')
data_2006 <- read_csv(paste0(path_data,'2006/contrib_2006.txt'),col_names=colnames,
col_types = cols(.default=col_character()))
data_2006_1 <- read_file(paste0(path_data,'2006/contrib_2006.txt'), "RAW")
data_2006_1 <- read_file(paste0(path_data,'2006/contrib_2006.txt'))
data_2006_1 <- read_lines_raw(paste0(path_data,'2006/contrib_2006.txt'))
data_2006_1 <- read_lines(paste0(path_data,'2006/contrib_2006.txt'))
data_2006_1[1]
data_2006_1[2]
data_2006_1[1]
as_tibble(data_2006_1)
data_2006_1 <- as_tibble(data_2006_1)
View(data_2006_1)
View(data_2006)
View(data_2006_1)
data_2006_1 %>%
separate(value, into=colnames,sep=',')
data_2006_1 <- data_2006_1 %>%
separate(value, into=colnames,sep=',')
data_2006_1 <- read_lines(paste0(path_data,'2006/contrib_2006.txt'))
data_2006_1 <- as_tibble(data_2006_1)
data_2006_2 <- data_2006_1 %>%
mutate(value=gsub('","','"\t"',value)) %>%
separate(value, into=colnames,sep='\t')
View(data_2006_2)
data_2006_2 <- data_2006_1 %>%
mutate(value=gsub('","','"\t"',value))
data_2006_2 <- data_2006_1 %>%
mutate(value=gsub('(?<=\"),(?=\")','\t',value),
value=gsub('(?<=\"),(?=\d)','\t',value))
data_2006_2 <- data_2006_1 %>%
mutate(value=gsub('(?<=\"),(?=\")','\t',value),
value=gsub('(?<=\"),(?=[:digit:])','\t',value))
data_2006_2 <- data_2006_1 %>%
mutate(value=gsub('(?<=\"),(?=\")','\t',value))
data_2006_2 <- data_2006_1 %>%
mutate(value=gsub('(?<=\\"),(?=\\")','\t',value))
data_2006_2 <- data_2006_1 %>%
mutate(value=gsub('(?<="),(?=")','\t',value))
data_2006_2 <- data_2006_1 %>%
mutate(value=gsub('(?<="),','\t',value))
data_2006_2 <- data_2006_1 %>%
mutate(value=gsub('(?<= ),','\t',value))
data_2006_2 <- data_2006_1 %>%
mutate(value=gsub('(?<=")7','\t',value))
data_2006_2 <- data_2006_1 %>%
mutate(value=gsub('(?<=[:blank:])7','\t',value))
data_2006_2 <- data_2006_1 %>%
mutate(value=gsub('(?<=[:blank:])7','\t',value, perl=TRUE))
data_2006_2 <- data_2006_1 %>%
mutate(value=gsub('(?<=\")7','\t',value, perl=TRUE))
data_2006_2 <- data_2006_1 %>%
mutate(value=gsub('(?<=\"),(?=\")','\t',value, perl=TRUE))
data_2006_2 <- data_2006_1 %>%
mutate(value=gsub('(?<=\"),(?=\")','\t',value, perl=TRUE),
value=gsub('(?<=\"),(?=\d)'))
data_2006_2 <- data_2006_1 %>%
mutate(value=gsub('(?<=\"),(?=\")','\t',value, perl=TRUE),
value=gsub('(?<=\"),(?=\\d)'))
data_2006_2 <- data_2006_1 %>%
mutate(value=gsub('(?<=\"),(?=\")','\t',value, perl=TRUE),
value=gsub('(?<=\"),(?=\d)',value,perl=TRUE))
data_2006_2 <- data_2006_1 %>%
mutate(value=gsub('(?<=\"),(?=\")','\t',value, perl=TRUE),
value=gsub('(?<=\"),(?=\\d)',value,perl=TRUE))
data_2006_2 <- data_2006_1 %>%
mutate(value=gsub('(?<=\"),(?=\")','\t',value, perl=TRUE),
value=gsub('(?<=\"),(?=\\d)','\t',value,perl=TRUE))
data_2006_2 <- data_2006_1 %>%
mutate(value=gsub('(?<=\"),(?=\")','\t',value, perl=TRUE),
value=gsub('(?<=\"),(?=\\d)','\t',value,perl=TRUE),
value=gsub('(?=\\d),(?=\\d)','\t'),value,perl=TRUE))
data_2006_2 <- data_2006_1 %>%
mutate(value=gsub('(?<=\"),(?=\")','\t',value, perl=TRUE),
value=gsub('(?<=\"),(?=\\d)','\t',value,perl=TRUE),
value=gsub('(?=\\d),(?=\\d)','\t',value,perl=TRUE))
data_2006_2 <- data_2006_1 %>%
mutate(value=gsub('(?<=\"),(?=\")','\t',value, perl=TRUE),
value=gsub('(?<=\"),(?=\\d)','\t',value,perl=TRUE),
value=gsub('(?<=\\d),(?=\\d)','\t',value,perl=TRUE),
value=gsub('(?<=\\d),(?=\"'),'\t',vlaue,perl=TRUE))
data_2006_2 <- data_2006_1 %>%
mutate(value=gsub('(?<=\"),(?=\")','\t',value, perl=TRUE),
value=gsub('(?<=\"),(?=\\d)','\t',value,perl=TRUE),
value=gsub('(?<=\\d),(?=\\d)','\t',value,perl=TRUE),
value=gsub('(?<=\\d),(?=\")','\t',vlaue,perl=TRUE))
data_2006_2 <- data_2006_1 %>%
mutate(value=gsub('(?<=\"),(?=\")','\t',value, perl=TRUE),
value=gsub('(?<=\"),(?=\\d)','\t',value,perl=TRUE),
value=gsub('(?<=\\d),(?=\\d)','\t',value,perl=TRUE),
value=gsub('(?<=\\d),(?=\")','\t',value,perl=TRUE))
data_2006_2 <- data_2006_1 %>%
mutate(value=gsub('(?<=\"),(?=\")','\t',value, perl=TRUE),
value=gsub('(?<=\"),(?=\\d)','\t',value,perl=TRUE),
value=gsub('(?<=\\d),(?=\\d)','\t',value,perl=TRUE),
value=gsub('(?<=\\d),(?=\")','\t',value,perl=TRUE)) %>%
separate(value, into=colnames,sep="\t")
anti_join(data_2006 %>%
select(FILERID,CONTRIBUTOR),
data_2006_2 %>%
select(FILERID, CONTRIBUTOR))
library(tidyverse)
library(DT)
path_data <- 'D:/Documents/data/Pennsylvania/campfin/'
colnames <- c('FILERID','EYEAR','CYCLE','SECTION','CONTRIBUTOR','ADDRESS1','ADDRESS2',
'CITY','STATE','ZIPCODE','OCCUPATION','ENAME','EADDRESS1','EADDRESS2','ECITY',
'ESTATE','EZIPCODE','CONTDATE1','CONTAMT1','CONTDATE2','CONTAMT2','CONTDATE3',
'CONTAMT3','CONTDESC')
data_2006 <- read_csv(paste0(path_data,'2006/contrib_2006.txt'),col_names=colnames,
col_types = cols(.default=col_character()))
data_2006_1 <- read_lines(paste0(path_data,'2006/contrib_2006.txt'))
data_2006_1 <- as_tibble(data_2006_1)
data_2006_2 <- data_2006_1 %>%
mutate(row_num = 1:n(),
chars = nchar(value),
quotes = str_count(value,'"'),
commas = str_count(value,',')) %>%
select(row_num, chars, quotes, commas, value)
data_2006_2 %>%
filter(quotes < 38)
data_2006_2 %>%
filter(commas < 23) %>%
datatable()
data_2006 %>%
filter(CONTRIBUTOR == "Richard O'Flynn")
data_2006_2 %>%
filter(quotes>38, commas>23)
library(tidyverse)
library(DT)
path_data <- 'D:/Documents/data/Pennsylvania/campfin/'
colnames <- c('FILERID','EYEAR','CYCLE','SECTION','CONTRIBUTOR','ADDRESS1','ADDRESS2',
'CITY','STATE','ZIPCODE','OCCUPATION','ENAME','EADDRESS1','EADDRESS2','ECITY',
'ESTATE','EZIPCODE','CONTDATE1','CONTAMT1','CONTDATE2','CONTAMT2','CONTDATE3',
'CONTAMT3','CONTDESC')
data_2006 <- read_csv(paste0(path_data,'2006/contrib_2006.txt'),col_names=colnames,
col_types = cols(.default=col_character()))
data_2006_1 <- read_lines(paste0(path_data,'2006/contrib_2006.txt'))
data_2006_1 <- as_tibble(data_2006_1)
data_2006_2 <- data_2006_1 %>%
mutate(row_num = 1:n(),
chars = nchar(value),
quotes = str_count(value,'"'),
commas = str_count(value,',')) %>%
select(row_num, chars, quotes, commas, value)
